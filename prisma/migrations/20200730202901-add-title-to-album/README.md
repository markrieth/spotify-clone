# Migration `20200730202901-add-title-to-album`

This migration has been generated by markrieth at 7/30/2020, 8:29:01 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "new_Album" (
"id" TEXT NOT NULL,
"title" TEXT NOT NULL,
"artistId" TEXT NOT NULL,
PRIMARY KEY ("id"),
FOREIGN KEY ("artistId") REFERENCES "Artist"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

INSERT INTO "new_Album" ("id", "artistId") SELECT "id", "artistId" FROM "Album"

PRAGMA foreign_keys=off;
DROP TABLE "Album";;
PRAGMA foreign_keys=on

ALTER TABLE "new_Album" RENAME TO "Album";

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200730200752-add-genre-index..20200730202901-add-title-to-album
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -25,8 +25,9 @@
 }
 model Album {
   id          String     @id @default(uuid())
+  title       String
   artistId    String
   artist      Artist     @relation(fields: [artistId], references: [id])
   songs       Song[]
 }
```


